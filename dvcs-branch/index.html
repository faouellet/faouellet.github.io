<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.1"><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="Of source control and databases - Part 4 - Branches support" /><meta name="author" content="Félix-Antoine Ouellet" /><meta property="og:locale" content="en_US" /><meta name="description" content="The more the merrier." /><meta property="og:description" content="The more the merrier." /><link rel="canonical" href="https://faouellet.github.io//dvcs-branch/" /><meta property="og:url" content="https://faouellet.github.io//dvcs-branch/" /><meta property="og:site_name" content="/* Insert Code Here */" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-05T00:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Of source control and databases - Part 4 - Branches support" /> <script type="application/ld+json"> {"description":"The more the merrier.","url":"https://faouellet.github.io//dvcs-branch/","headline":"Of source control and databases - Part 4 - Branches support","dateModified":"2021-02-05T00:00:00-05:00","@type":"BlogPosting","datePublished":"2021-02-05T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://faouellet.github.io//dvcs-branch/"},"author":{"@type":"Person","name":"Félix-Antoine Ouellet"},"@context":"https://schema.org"}</script><title>Of source control and databases - Part 4 - Branches support | /* Insert Code Here */</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-71911238-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-71911238-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">/* Insert Code Here */</a></div><div class="site-subtitle font-italic"></div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/faouellet" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://www.linkedin.com/in/felixantoineouellet/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['faouellet','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Of source control and databases - Part 4 - Branches support</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Of source control and databases - Part 4 - Branches support</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Feb 5, 2021, 12:00 AM -0500" > Feb 5 <i class="unloaded">2021-02-05T00:00:00-05:00</i> </span> by <span class="author"> Félix-Antoine Ouellet </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="983 words">5 min</span></div></div><div class="post-content"><hr /><p>All the code for the articles in this series can be found <a href="https://github.com/faouellet/DVCSUS">here</a>.</p><hr /><p>For this article and the next, we’ll be looking at some functionalities that weren’t included in my original programming assignment. Up first is the adding branch support to DVCSUS.</p><h2 id="interface">Interface</h2><p>Even if branches are a supplementary feature, their interface will be like all others: as simple as can be. To this end, I propose to have not one but two commands to deal with branches: <code class="language-plaintext highlighter-rouge">branch_create</code> and <code class="language-plaintext highlighter-rouge">branch_checkout</code>. Their purposes are self-explanatory: <code class="language-plaintext highlighter-rouge">branch_create</code> will create a new branch if it doesn’t already exists and <code class="language-plaintext highlighter-rouge">branch_checkout</code> will position the repository on a given branch if it exists. It goes without saying that both of these commands will need to receive a branch name as an argument to work. In more concrete terms, we have to implement the following commands:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>dvcsus branch_create &lt;branchname&gt;
dvcsus branch_checkout &lt;branchname&gt;
</pre></table></code></div></div><h2 id="repository">Repository</h2><h3 id="schema-again">Schema (again)</h3><figure><p style="text-align:center;"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/repobranches.jpg" alt="Image: " /></p><figcaption><span><center><i></i></center></span></figcaption></figure><p>To support branches we need to augment the <code class="language-plaintext highlighter-rouge">Repository</code> database with two new tables: <code class="language-plaintext highlighter-rouge">Branches</code> and <code class="language-plaintext highlighter-rouge">BranchesCommits</code> tables.</p><ul><li><code class="language-plaintext highlighter-rouge">Branches</code>: This will contain all the branches’ information. In our prototype system, this’ll be limited to a branch’s name and its latest commit as identified by a hash.<li><code class="language-plaintext highlighter-rouge">BranchesCommits</code>: A link table that keeps track of which commit goes into which branch.</ul><h3 id="metadata">Metadata</h3><p>As was the case for the current commit, we’ll also need to track the current branch we’re working on. To this end, we’ll add another entry in the <code class="language-plaintext highlighter-rouge">Metadata</code> table: <em>CurrentBranch</em> to which we’ll associate the name of the currently active branch.</p><h2 id="implementation">Implementation</h2><p>Evidently, adding branches to DVCSUS will have impacts on what was previously implemented.</p><ul><li><code class="language-plaintext highlighter-rouge">Init</code> will have to set up the new tables. This means it’ll have the reponsibility of creating the <em>default</em> branch and setting it as such in the <code class="language-plaintext highlighter-rouge">Metadata</code> table.<li><code class="language-plaintext highlighter-rouge">Commit</code> will also need to consider the current branch when executing. Concretly, this will take the form of adding a new entry in <code class="language-plaintext highlighter-rouge">BranchesCommits</code> and updating <code class="language-plaintext highlighter-rouge">Branches.HeadCommit</code> accordingly.<li><code class="language-plaintext highlighter-rouge">Add</code> won’t be affected by the newly present branches (as it should since it only deals in local information).</ul><p>I won’t go into further details about these small refactorings here since they’re done at the SQL level. I’d rather we look at C++ source code in this article. However, you’re more than welcome to look at the source code if you’re curious about what the SQL looks like.</p><h3 id="creation">Creation</h3><p>Creating a new branch will roughly look like this:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span> <span class="kt">bool</span> <span class="n">CreateBranch</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">branchName</span><span class="p">)</span> <span class="k">noexcept</span>
<span class="p">{</span>
  <span class="k">try</span>
  <span class="p">{</span>
    <span class="n">TDatabasePtr</span> <span class="n">pDB</span><span class="p">{</span><span class="nb">nullptr</span><span class="p">,</span> <span class="n">sqlite3_close</span><span class="p">};</span>
    <span class="n">RETURN_IF</span><span class="p">(</span><span class="o">!</span><span class="n">OpenDatabaseConnection</span><span class="p">(</span><span class="n">fs</span><span class="o">::</span><span class="n">current_path</span><span class="p">()</span> <span class="o">/</span> <span class="n">REPO_DB_PATH</span><span class="p">,</span> <span class="n">pDB</span><span class="p">),</span> <span class="nb">false</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ValidateNoResult</span><span class="p">(</span><span class="n">pDB</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span><span class="s">"SELECT COUNT(*) FROM Branches WHERE Name = </span><span class="se">\"</span><span class="s">{}</span><span class="se">\"</span><span class="s">"</span><span class="p">,</span> <span class="n">branchName</span><span class="p">)))</span>
    <span class="p">{</span>
      <span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="p">,</span> 
                 <span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span><span class="s">"Branch '{}' already exists.</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">branchName</span><span class="p">));</span>
      <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">ValidateNoResult</span><span class="p">(</span><span class="n">pDB</span><span class="p">,</span> <span class="s">"SELECT COUNT(*) FROM Commits"</span><span class="p">))</span>
    <span class="p">{</span>
      <span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="p">,</span> 
                 <span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span><span class="s">"Can't create branch '{}' in empty repository.</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">branchName</span><span class="p">));</span>
      <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">const</span> <span class="k">auto</span> <span class="n">createQuery</span> <span class="o">=</span> <span class="cm">/* Omitted for brevity */</span>
    <span class="k">return</span> <span class="n">ExecuteQuery</span><span class="p">(</span><span class="n">pDB</span><span class="p">,</span> <span class="n">createQuery</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">exception</span> <span class="o">&amp;</span><span class="n">e</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="p">,</span> <span class="s">"{}</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">());</span>
      <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Once we get a connection to the <code class="language-plaintext highlighter-rouge">Repository</code> database, we have to do three things with it:</p><ol><li>Make sure the branch doesn’t already exists. This is taken care of by passing a query that gets all the branches with the name of the branch we want to create to <code class="language-plaintext highlighter-rouge">ValidateNoResult</code>. If all is well, the query won’t return any result.<li>Make sure there are already commits in the repository. This is needed to correctly handle the repository’s arborescence. While it’s a limitation compared to more full-fledged version control systems, it’s acceptable in the context of a prototype.<li>Add the branch to the repository. In other words, add a new entry in the <code class="language-plaintext highlighter-rouge">Branches</code> table which will contains the name of the new branch and the current commit (the <em>CurrentCommit</em> entry in the <code class="language-plaintext highlighter-rouge">Staging.Metadata</code> table) as the head of the new branch.</ol><p>We could also add “checkout the new branch” to the list of operations to do as some source control systems do. I chose not to do it, but you’re free to change that!</p><h3 id="checkout">Checkout</h3><p>Checking out a branch could be implemented as shown below:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span> <span class="kt">bool</span> <span class="n">CheckoutBranch</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">branchName</span><span class="p">)</span> <span class="k">noexcept</span>
<span class="p">{</span>
  <span class="k">try</span>
  <span class="p">{</span>
    <span class="n">TDatabasePtr</span> <span class="n">pDB</span><span class="p">{</span><span class="nb">nullptr</span><span class="p">,</span> <span class="n">sqlite3_close</span><span class="p">};</span>
    <span class="n">RETURN_IF</span><span class="p">(</span><span class="o">!</span><span class="n">OpenDatabaseConnection</span><span class="p">(</span><span class="n">fs</span><span class="o">::</span><span class="n">current_path</span><span class="p">()</span> <span class="o">/</span> <span class="n">REPO_DB_PATH</span><span class="p">,</span> <span class="n">pDB</span><span class="p">),</span> <span class="nb">false</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ValidateNoResult</span><span class="p">(</span><span class="n">pDB</span><span class="p">,</span> <span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span><span class="s">"SELECT COUNT(*) FROM Branches WHERE Name = </span><span class="se">\"</span><span class="s">{}</span><span class="se">\"</span><span class="s">"</span><span class="p">,</span> <span class="n">branchName</span><span class="p">)))</span>
    <span class="p">{</span>
      <span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="p">,</span> 
                 <span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span><span class="s">"Can't checkout branch '{}'. It doesn't exists.</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">branchName</span><span class="p">));</span>
      <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">RETURN_IF</span><span class="p">(</span><span class="o">!</span><span class="n">OpenDatabaseConnection</span><span class="p">(</span><span class="n">fs</span><span class="o">::</span><span class="n">current_path</span><span class="p">()</span> <span class="o">/</span> <span class="n">STAGING_DB_PATH</span><span class="p">,</span> <span class="n">pDB</span><span class="p">),</span> <span class="nb">false</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ValidateNoResult</span><span class="p">(</span><span class="n">pDB</span><span class="p">,</span> <span class="s">"SELECT COUNT(*) FROM Objects"</span><span class="p">))</span>
    <span class="p">{</span>
      <span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="p">,</span> 
                 <span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span><span class="s">"Can't checkout '{}' branch. Uncommitted changes detected.</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">branchName</span><span class="p">));</span>
      <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">const</span> <span class="k">auto</span> <span class="n">checkoutQuery</span> <span class="o">=</span> <span class="cm">/* Omitted for brevity */</span>

    <span class="k">return</span> <span class="n">ExecuteQuery</span><span class="p">(</span><span class="n">pDB</span><span class="p">,</span> <span class="n">checkoutQuery</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">exception</span> <span class="o">&amp;</span><span class="n">e</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="p">,</span> <span class="s">"{}</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">());</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Notice that we need to validate two things here:</p><ol><li>The branch <strong>must exists</strong>. Checking out a non-existing branch doesn’t make any sense.<li>There must be <strong>no uncommitted changes</strong> in the repository. This is in line with all the other distributed source control systems I know of. Since all the current uncomitted changes are based on a given commit, we can’t keep them if we are to change branches as this will change the current commit. In fact, it’s possible that the uncomitted changes won’t even make sense with the new current commit!</ol><p>As to the query that’ll effectively change the current branch, it’ll be almost trivial. It’ll only have to modify two things, both in the <code class="language-plaintext highlighter-rouge">Metadata</code> table:</p><ul><li>The <em>CurrentBranch</em> which will now be the branch name received as argument.<li>The <em>CurrentCommit</em> which will now be the head commit of the new branch as per the entry in the <code class="language-plaintext highlighter-rouge">Branches</code> table.</ul><p>That’s it. We can now move between branches at will!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/of-source-control-and-databases/'>Of source control and databases</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/source-control/" class="post-tag no-text-decoration" >Source Control</a> <a href="/tags/database/" class="post-tag no-text-decoration" >Database</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Of source control and databases - Part 4 - Branches support - /* Insert Code Here */&url=https://faouellet.github.io//dvcs-branch/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Of source control and databases - Part 4 - Branches support - /* Insert Code Here */&u=https://faouellet.github.io//dvcs-branch/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Of source control and databases - Part 4 - Branches support - /* Insert Code Here */&url=https://faouellet.github.io//dvcs-branch/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/database/">Database</a> <a class="post-tag" href="/tags/source-control/">Source Control</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/build-system/">Build System</a> <a class="post-tag" href="/tags/parallelism/">Parallelism</a> <a class="post-tag" href="/tags/compiler-development/">Compiler Development</a> <a class="post-tag" href="/tags/software-development/">Software Development</a> <a class="post-tag" href="/tags/c-amp/">C++AMP</a> <a class="post-tag" href="/tags/concurrency/">Concurrency</a> <a class="post-tag" href="/tags/gpgpu/">GPGPU</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/dvcs-intro/"><div class="card-body"> <span class="timeago small" > Feb 1 <i class="unloaded">2021-02-01T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Of source control and databases - Part 0 - Overview</h3><div class="text-muted small"><p> All the code for the articles in this series can be found here. Once again, I offer you an adaptation of some content I developed in my previous life as a teaching assistant. This time, I’ll b...</p></div></div></a></div><div class="card"> <a href="/dvcs-init/"><div class="card-body"> <span class="timeago small" > Feb 2 <i class="unloaded">2021-02-02T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Of source control and databases - Part 1 - Initializing a repository</h3><div class="text-muted small"><p> All the code for the articles in this series can be found here. The (obvious) first step in our endeavor is to allow users to set up a repository. To this end, we’ll offer them an init command...</p></div></div></a></div><div class="card"> <a href="/dvcs-add/"><div class="card-body"> <span class="timeago small" > Feb 3 <i class="unloaded">2021-02-03T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Of source control and databases - Part 2 - Adding changes</h3><div class="text-muted small"><p> All the code for the articles in this series can be found here. Now that the users can create a new repository through the init command, we can start filling it out. This will be the purpose o...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/dvcs-commit/" class="btn btn-outline-primary"><p>Of source control and databases - Part 3 - Committing changes</p></a> <a href="/dvcs-remote/" class="btn btn-outline-primary"><p>Of source control and databases - Part 5 - Remote support (ish)</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//insertcodehere.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://faouellet.github.io//dvcs-branch/'; this.page.identifier = '/dvcs-branch/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/faouellet">Félix-Antoine Ouellet</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/database/">Database</a> <a class="post-tag" href="/tags/source-control/">Source Control</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/build-system/">Build System</a> <a class="post-tag" href="/tags/parallelism/">Parallelism</a> <a class="post-tag" href="/tags/compiler-development/">Compiler Development</a> <a class="post-tag" href="/tags/software-development/">Software Development</a> <a class="post-tag" href="/tags/c-amp/">C++AMP</a> <a class="post-tag" href="/tags/concurrency/">Concurrency</a> <a class="post-tag" href="/tags/gpgpu/">GPGPU</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://faouellet.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
